<template>
    <div class="relative w-full overflow-hidden rounded-xl">
        <img src="/images/hero/main.jpg" alt="" class="w-full h-full object-cover object-center">
        <div class="absolute inset-0 bg-black/30"></div>
        <div class="absolute inset-0 py-10 px-4 flex justify-center items-center text-center text-white">
            <div class="flex flex-col items-center relative gap-6 w-fit p-4 lg:p-6 max-w-2xl">
                <div class="absolute inset-0 backdrop-blur-md rounded-xl"></div>
                <p class="text-4xl font-mono font-semibold z-[1]">–ö–Ω–∏–≥–∏. –ö–æ—Ñ–µ. –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.</p>
                <p class="opacity-70 text-lg tracking-wide z-[1]">
                    –£—é—Ç–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–∂–∏–≤–∞—é—Ç –≤–º–µ—Å—Ç–µ —Å –∞—Ä–æ–º–∞—Ç–æ–º —Å–≤–µ–∂–µ–≥–æ –∫–æ—Ñ–µ.
                    –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è –∑–∞ –ª—é–±–∏–º–æ–π –∫–Ω–∏–≥–æ–π, –æ—Ç–∫—Ä—ã—Ç—å –¥–ª—è —Å–µ–±—è –Ω–æ–≤—ã–µ –∏—Å—Ç–æ—Ä–∏–∏.
                </p>
            </div>
        </div>
    </div>
    <div class="flex flex-col gap-6">
        <p class="mainHeading">–ü—Ä–∏—á–∏–Ω—ã –≤—ã–±—Ä–∞—Ç—å Book Caf√©</p>
        <p>–ó–¥–µ—Å—å –≤—Ä–µ–º—è —Ç–µ—á–µ—Ç –∏–Ω–∞—á–µ: –º–∏–Ω—É—Ç—ã –∑–∞ –∫–Ω–∏–≥–æ–π –∫–∞–∂—É—Ç—Å—è —á–∞—Å–∞–º–∏, –∞ —á–∞—Å—ã –∑–∞ –∫–æ—Ñ–µ ‚Äî –º–≥–Ω–æ–≤–µ–Ω–∏—è–º–∏</p>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div
                class="flex flex-col gap-4 p-4 rounded-xl bg-white border border-gray-200 shadow-[0px_0px_20px_-15px_black]">
                <p class="text-2xl font-mono font-semibold text-[#131313]">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ üìö</p>
                <p>–£—é—Ç–Ω—ã–µ –∑–∞–ª—ã —Å –¥–∏–≤–∞–Ω–∞–º–∏ –∏ –ø–æ–ª–∫–∞–º–∏ –∫–Ω–∏–≥, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ.</p>
            </div>
            <div
                class="flex flex-col gap-4 p-4 rounded-xl bg-white border border-gray-200 shadow-[0px_0px_20px_-15px_black]">
                <p class="text-2xl font-mono font-semibold text-[#131313]">–ê–≤—Ç–æ—Ä—Å–∫–∏–π –∫–æ—Ñ–µ ‚òïÔ∏è</p>
                <p>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å–º–µ—Å–∏ –æ—Ç –º–µ—Å—Ç–Ω—ã—Ö –æ–±–∂–∞—Ä—â–∏–∫–æ–≤ –∏ —Å–µ–∑–æ–Ω–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏ —Å –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏.</p>
            </div>
            <div
                class="flex flex-col gap-4 p-4 rounded-xl bg-white border border-gray-200 shadow-[0px_0px_20px_-15px_black]">
                <p class="text-2xl font-mono font-semibold text-[#131313]">–ò–≤–µ–Ω—Ç—ã üìñ</p>
                <p>–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —á—Ç–µ–Ω–∏—è, –≤—Å—Ç—Ä–µ—á–∏ —Å –∞–≤—Ç–æ—Ä–∞–º–∏ –∏ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ—á–µ—Ä–∞.</p>
            </div>
            <div
                class="flex flex-col gap-4 p-4 rounded-xl bg-white border border-gray-200 shadow-[0px_0px_20px_-15px_black]">
                <p class="text-2xl font-mono font-semibold text-[#131313]">–ö–æ–≤–æ—Ä–∫–∏–Ω–≥ üíª</p>
                <p>–¢–∏—Ö–∏–µ —É–≥–æ–ª–∫–∏ —Å —Ä–æ–∑–µ—Ç–∫–∞–º–∏ –∏ –±—ã—Å—Ç—Ä—ã–º Wi-Fi –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã.</p>
            </div>
        </div>
    </div>
    <div class="flex flex-col gap-6">
        <p class="mainHeading">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ —Ö–æ—á–µ—Ç—Å—è –æ—Å—Ç–∞—Ç—å—Å—è</p>
        <div ref="container" class="flex w-full overflow-hidden group gap-4 lg:h-96 max-lg:flex-col max-lg:h-80">
            <div v-for="(image, index) in images" :key="index" :ref="el => { if (el) items[index] = el }"
                class="w-full lg:w-1/4 transition-all duration-500 lg:group-hover:w-[15%] lg:hover:!w-[50%] max-lg:h-40 rounded-xl overflow-hidden"
                :class="{ '!h-[500px]': activeIndex === index }" @click="handleClick(index)">
                <img :src="image" class="w-full h-full object-cover">
            </div>
        </div>
    </div>
</template>

<script setup>
const images = [
  '/images/hero/main.jpg',
  '/images/hero/main.jpg',
  '/images/hero/main.jpg',
  '/images/hero/main.jpg'
]

const items = ref([])
const activeIndex = ref(null)
const container = ref(null)

const handleClick = (index) => {
  if (window.innerWidth >= 1024) return // –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–ª–∏–∫–∏ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ
  
  if (activeIndex.value === index) {
    // –ï—Å–ª–∏ –∫–ª–∏–∫–∞–µ–º –Ω–∞ —É–∂–µ –∞–∫—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç - –∑–∞–∫—Ä—ã–≤–∞–µ–º
    activeIndex.value = null
  } else {
    // –ò–Ω–∞—á–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–æ–≤—ã–π
    activeIndex.value = index
    
    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
    nextTick(() => {
      items.value[index]?.scrollIntoView({
        behavior: 'smooth',
        block: 'nearest'
      })
    })
  }
}

// –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏
const onClickOutside = (event) => {
  if (window.innerWidth >= 1024) return
  
  if (container.value && !container.value.contains(event.target)) {
    activeIndex.value = null
  }
}

onMounted(() => {
  window.addEventListener('click', onClickOutside)
})

onBeforeUnmount(() => {
  window.removeEventListener('click', onClickOutside)
})
</script>